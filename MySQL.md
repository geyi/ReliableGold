# 查看sql语句的执行时间
```
set profiling=1;
select * from test;
show profiles;
show profile;
-- 查看query id为2的sql的执行时间
show profile for query 2;
```

# performance_schema

# show processlist;

# Schema与数据类型优化

## 更小的通常更好
应该尽量使用能够正确存储数据的最小数据类型，例如：
- int和tinyint的使用。当字段的取值只有0、1时应该使用tinyint类型。

## 简单就好
简单数据类型的操作通常需要更少的CPU资源，例如：
- 整型比字符串的比较成本更低，因为字符集和校对规则使字符比较比整型比较更复杂。
- 使用MySQL自建类型而不是字符串来存储日期和时间。
- 使用整型存储IP地址（INET_ATON(ip)）

## 尽量避免null
- 负向比较（!=）会引发全表扫描。
- 如果查询中包含可为null的列，对MySQL来说很难优化，因为可为null的列使得索引、索引统计和值比较都更加复杂。

## 数据类型

### 整型
可以使用的几种整型类型：TINYINT，SMALLINT，MEDIUMINT，INT，BIGINT分别使用8，16，24，32，64位存储空间。应尽量使用满足需求的最小数据类型。

### 字符类型
1. char长度固定，即每条数据占用等长字节空间；最大长度是255个字符，适用于身份证号、手机号等定长字符串的存储。
2. varchar可变长度，可以设置最大长度；最大空间是65535个字节，适用于长度差异较大的字符串的存储。
3. text不设置长度，当不知道属性的最大长度时，适合用text。
4. blob采用二进制的存储方式。

### 时间类型
1. datetime，占用8个字节，与时区无关，可保存到毫秒，可保存的时间范围大（1000-01-01 00:00:00 ~ 9999-12-31 23:59:59）
2. timestamp，占用4个字节，依赖数据库设置的时区，精确到秒，时间范围（1970-01-01 00:00:01 ~ 2037-12-31 23:59:59）
3. date，占用3个字节，时间范围（1000-01-01 ~ 9999-12-31）